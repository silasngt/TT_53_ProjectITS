<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <title>Document</title>
    <style>
      body {
        font-family: "Roboto", sans-serif;
        background-color: #f8f9fa;
        color: #343a40;
      }
      #preloader {
        background: #e5eff1 url('https://th.bing.com/th/id/R.5be365b4576b73da8de3e8e7cf5ba94d?rik=VllzSYmE6UTNRg&pid=ImgRaw&r=0') no-repeat center center;
        background-size: 15%;
        height: 100vh;
        width: 100%;
        position: fixed;
        z-index: 100;
      }
      .display {
        animation: opacity 5s forwards;
      }
      @keyframes opacity {
        100% {
          display: none;
        }
      }
      a {
        color: #007bff;
        text-decoration: none;
      }
      a:hover {
        color: #0056b3;
        text-decoration: underline;
      }
      .card-body {
        background-color: white;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 2rem;
        border-radius: 0.5rem;
      }
      .card-body h1,
      .card-body h3 {
        color: #007bff;
      }
      .btn-container {
        display: flex;
        justify-content: space-around;
        margin-top: 2rem;
      }
      .btn-custom {
        background-color: #007bff;
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        text-align: center;
        text-decoration: none;
        transition: background-color 0.3s ease;
      }
      .btn-custom:hover {
        background-color: #0056b3;
      }
      .steam {
        margin-top: 2rem;
      }
      #video-frame {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 2rem;
      }
      #video-frame img {
        max-width: 100%;
        border-radius: 0.5rem;
      }
    </style>
  </head>
  <body>
    <div id="preloader"></div>
    <div class="container mt-5">
      <div class="card-body text-center">
        <img
          src="https://giaothongvantaitphcm.com.vn/wp-content/uploads/2025/01/Logo-GTVT.png"
          alt="ĐẠI HỌC GIAO THÔNG VẬN TẢI TPHCM"
          style="width: 100px; height: 100px"
        />
        <h1 class="p-3 m-lg-1 fs-2">HỆ THỐNG GIÁM SÁT GIAO THÔNG</h1>
        <h3 class="m-5 p-5 m-lg-1 text-center fs-2">
          Camera Giám Sát Xe Vi Phạm Mũ Bảo Hiểm
        </h3>
        <div id="video-frame">
          <h3 class="conn d-none" id="conn-alert">No Connected</h3>
          <img
            id="steam"
            src="http://127.0.0.1:8000/camera2"
            loading="lazy"
            class="img-fluid"
            alt="..."
          />
        </div>
        <div class="btn-container">
          <a href="/Hethongcamera1" class="btn-custom">
            Camera Giám Sát Phương Tiện Vi Phạm Làn Đường
          </a>
          <a href="/thongke" class="btn-custom">
            Thống Kê Phương Tiện Vi Phạm
          </a>
          <a href="/bb" class="btn-custom">
            Một Số Quy Định Giao Thông
          </a>
          <a href="/" class="btn-custom">
            Quay Lại Trang Chủ
          </a>
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.4/js/tether.min.js"></script>
    <script>
      function checkVideoAlive(videoUrl) {
        let video = document.getElementById("steam");
        let text = document.getElementById("conn-alert");
        let video_frame = document.getElementById("video-frame");
        video.onerror = function () {
          console.log("Video is not alive.");
          text.setAttribute("class", "conn");
          video.setAttribute("class", "img-fluid d-none");
        };

        video.onplay = function () {
          text.setAttribute("class", "conn d-none");
          console.log("Connected.");
        };
      }
      checkVideoAlive("http://127.0.0.1:8000/camera2");
    </script>
    <script>
      var loader = document.getElementById("preloader");
      window.addEventListener("load", vanish);
      function vanish() {
        loader.classList.add("display");
      }
      setTimeout(function () {
        $("#preloader").fadeToggle();
      }, 1500);
    </script>
  </body>
</html>